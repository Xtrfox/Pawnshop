angular.module('Pawn.directives')
  .directive('addItemForm', function() {
    return {
      restrict: 'E',
      replace: true,
      templateUrl: '<%= asset_path("shared/_addItemForm.html") %>',
      controller: function($scope){
        $scope.items=[{id:1}];

        $scope.addNewItem= function(){
          var newItem = $scope.items.length+1;
          console.log(newItem);
          $scope.items.push({'id': newItem});
        };

        $scope.totaldays = 31;

        $scope.days = [];
        for (var i = 0; i < $scope.totaldays; i+=1) {
          $scope.days.push({value: i+1, day: i + 1});
        }

        $scope.totalyears = 100;

        $scope.years = [];
        for (var i = 2014; i > 2014 - $scope.totalyears; i--) {
          $scope.years.push({value: i-1, year: i - 1});
        }

        $scope.months = [
          { value: 1, name: 'January' },
          { value: 2, name: 'February' },
          { value: 3, name: 'March' },
          { value: 4, name: 'April' },
          { value: 5, name: 'May' },
          { value: 6, name: 'June' },
          { value: 7, name: 'July' },
          { value: 8, name: 'August' },
          { value: 9, name: 'September' },
          { value: 10, name: 'October' },
          { value: 11, name: 'November' },
          { value: 12, name: 'December' }
      ];

      $scope.itemForm = function(data) {
        $scope.submitted = true;


          data = {
            "category": $scope.item.category,
            "description": $scope.item.description,
            "risk_level": $scope.item.risk_level,
            "amount": $scope.item.amount,
            "pawn_date": $scope.item.pawn_date,
            "due_date": $scope.item.due_date,
          }

      }


    }
  }
});
